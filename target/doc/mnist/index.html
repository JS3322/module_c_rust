<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A crate for parsing the MNIST data set into vectors to be used by Rust programs."><meta name="keywords" content="rust, rustlang, rust-lang, mnist"><title>mnist - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../mnist/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Crate mnist</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.4.1</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all mnist's items</p></a><div class="block items"><ul><li><a href="#structs">Structs</a></li></ul></div><div id="sidebar-vars" data-name="mnist" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">mnist</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/mnist/lib.rs.html#1-599" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A crate for parsing the <a href="http://yann.lecun.com/exdb/mnist/">MNIST</a> data set into vectors to be
used by Rust programs.</p>
<h2 id="about-the-mnist-database" class="section-header"><a href="#about-the-mnist-database">About the MNIST Database</a></h2>
<blockquote>
<p>The MNIST database (Mixed National Institute of Standards and Technology database) is a large
database of handwritten digits that is commonly used for training various image processing
systems. The database is also widely used for training and testing in the field of machine
learning. <sup><a href="https://en.wikipedia.org/wiki/MNIST_database">wikipedia</a></sup></p>
</blockquote>
<p>The MNIST data set contains 70,000 images of handwritten digits and their
corresponding labels. The images are 28x28 with pixel values from 0 to 255. The labels are the
digits from 0 to 9. By default 60,000 of these images belong to a training set and 10,000 of
these images belong to a test set.</p>
<h2 id="setup" class="section-header"><a href="#setup">Setup</a></h2>
<p>The MNIST data set is a collection of four gzip files and can be found [here]
(http://yann.lecun.com/exdb/mnist/). There is one file for each of the following: the training
set images, the training set labels, the test set images, and the test set labels. Because of
space limitations, the files themselves could not be included in this crate. The four files must
be downloaded and extracted. By default, they will be looked for in a “data” directory at the
top of level of your crate.</p>
<h2 id="usage" class="section-header"><a href="#usage">Usage</a></h2>
<p>A <a href="struct.Mnist.html">Mnist</a> struct is used to represent the various sets of data. In machine
learning, it is common to have three sets of data:</p>
<ul>
<li>Training Set - Used to train a classifier.</li>
<li>Validation Set - Used to regulate the training process (this set is not included in the
default MNIST data set partitioning).</li>
<li>Test Set - Used after the training process to determine if the classifier has actually learned
something.</li>
</ul>
<p>Each set of data contains a vector representing the image and a vector representing the label.
The vectors are always completely flattened. For example, the default image test set contains
60,000 images. Therefore the vector size will be
60,000 images x 28 rows x 28 cols = 47,040,000 elements in the vector.</p>
<p>A <a href="struct.MnistBuilder.html">MnistBuilder</a> struct is used to configure how to format the MNIST
data, retrieves the data, and returns the <a href="struct.Mnist.html">Mnist</a> struct. Configuration
options include:</p>
<ul>
<li>where to look for the MNIST data files.</li>
<li>how to format the label matricies.</li>
<li>how to partition the data between the training, validation, and test sets.</li>
</ul>
<h2 id="examples" class="section-header"><a href="#examples">Examples</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">mnist</span>;
<span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">rulinalg</span>;

<span class="kw">use</span> <span class="ident">mnist</span>::{<span class="ident">Mnist</span>, <span class="ident">MnistBuilder</span>};
<span class="kw">use</span> <span class="ident">rulinalg::matrix</span>::{<span class="ident">BaseMatrix</span>, <span class="ident">BaseMatrixMut</span>, <span class="ident">Matrix</span>};

<span class="kw">fn</span> <span class="ident">main</span>() {
    <span class="kw">let</span> (<span class="ident">trn_size</span>, <span class="ident">rows</span>, <span class="ident">cols</span>) <span class="op">=</span> (<span class="number">50_000</span>, <span class="number">28</span>, <span class="number">28</span>);

    <span class="comment">// Deconstruct the returned Mnist struct.</span>
    <span class="kw">let</span> <span class="ident">Mnist</span> { <span class="ident">trn_img</span>, <span class="ident">trn_lbl</span>, .. } <span class="op">=</span> <span class="ident">MnistBuilder::new</span>()
        .<span class="ident">label_format_digit</span>()
        .<span class="ident">training_set_length</span>(<span class="ident">trn_size</span>)
        .<span class="ident">validation_set_length</span>(<span class="number">10_000</span>)
        .<span class="ident">test_set_length</span>(<span class="number">10_000</span>)
        .<span class="ident">finalize</span>();

    <span class="comment">// Get the label of the first digit.</span>
    <span class="kw">let</span> <span class="ident">first_label</span> <span class="op">=</span> <span class="ident">trn_lbl</span>[<span class="number">0</span>];
    <span class="macro">println!</span>(<span class="string">&quot;The first digit is a {}.&quot;</span>, <span class="ident">first_label</span>);

    <span class="comment">// Convert the flattened training images vector to a matrix.</span>
    <span class="kw">let</span> <span class="ident">trn_img</span> <span class="op">=</span> <span class="ident">Matrix::new</span>((<span class="ident">trn_size</span> <span class="op">*</span> <span class="ident">rows</span>) <span class="kw">as</span> <span class="ident">usize</span>, <span class="ident">cols</span> <span class="kw">as</span> <span class="ident">usize</span>, <span class="ident">trn_img</span>);

    <span class="comment">// Get the image of the first digit.</span>
    <span class="kw">let</span> <span class="ident">row_indexes</span> <span class="op">=</span> (<span class="number">0</span>..<span class="number">27</span>).<span class="ident">collect</span>::<span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="kw">_</span><span class="op">&gt;</span><span class="op">&gt;</span>();
    <span class="kw">let</span> <span class="ident">first_image</span> <span class="op">=</span> <span class="ident">trn_img</span>.<span class="ident">select_rows</span>(<span class="kw-2">&amp;</span><span class="ident">row_indexes</span>);
    <span class="macro">println!</span>(<span class="string">&quot;The image looks like... \n{}&quot;</span>, <span class="ident">first_image</span>);

    <span class="comment">// Convert the training images to f32 values scaled between 0 and 1.</span>
    <span class="kw">let</span> <span class="ident">trn_img</span>: <span class="ident">Matrix</span><span class="op">&lt;</span><span class="ident">f32</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">trn_img</span>.<span class="ident">try_into</span>().<span class="ident">unwrap</span>() <span class="op">/</span> <span class="number">255.0</span>;

    <span class="comment">// Get the image of the first digit and round the values to the nearest tenth.</span>
    <span class="kw">let</span> <span class="ident">first_image</span> <span class="op">=</span> <span class="ident">trn_img</span>.<span class="ident">select_rows</span>(<span class="kw-2">&amp;</span><span class="ident">row_indexes</span>)
        .<span class="ident">apply</span>(<span class="kw-2">&amp;</span><span class="op">|</span><span class="ident">p</span><span class="op">|</span> (<span class="ident">p</span> <span class="op">*</span> <span class="number">10.0</span>).<span class="ident">round</span>() <span class="op">/</span> <span class="number">10.0</span>);
    <span class="macro">println!</span>(<span class="string">&quot;The image looks like... \n{}&quot;</span>, <span class="ident">first_image</span>);
}</code></pre></div>
</div></details><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="struct" href="struct.Mnist.html" title="mnist::Mnist struct">Mnist</a></div><div class="item-right docblock-short"><p>Struct containing image and label vectors for the training, validation, and test sets.</p>
</div><div class="item-left module-item"><a class="struct" href="struct.MnistBuilder.html" title="mnist::MnistBuilder struct">MnistBuilder</a></div><div class="item-right docblock-short"><p>Struct used for configuring how to load the MNIST data.</p>
</div><div class="item-left module-item"><a class="struct" href="struct.NormalizedMnist.html" title="mnist::NormalizedMnist struct">NormalizedMnist</a></div><div class="item-right docblock-short"><p>Struct containing (normalized) image and label vectors for the training, validation, and test sets.</p>
</div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="mnist" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script>
</body></html>